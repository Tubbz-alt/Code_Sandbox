\documentclass[10pt]{report}
\usepackage{fullpage}
\usepackage{graphicx}
\usepackage{verbatim}
\usepackage{subfig}
\usepackage{listings}

\newcommand{\HRule}{\rule{\linewidth}{0.5mm}}

\lstset{language=C++}

\begin{document}
\begin{titlepage}
\begin{center}

\vspace{10mm}

% Upper part of the page
\textsc{\LARGE Sierra Nevada Corporation}\\[1.5cm]

\vspace{80mm}

\textsc{\Large GeoImage Library}\\[0.5cm]

\vspace{10mm}

% Title
\HRule \\[0.4cm]
{ \huge \bfseries User Manual}\\[0.4cm]

\HRule \\[1.5cm]

% Author and supervisor
\begin{minipage}{0.4\textwidth}
\begin{center} \large
\emph{Author:}\\
Marvin \textsc{Smith}
\end{center}
\end{minipage}
\vfill
% Bottom of the page
{\large \today}
\end{center}
\end{titlepage}
\newpage

%**************************************************%
%                    INTRODUCTION                  %
%**************************************************%
\section*{Introduction}

The GeoImage Library is designed to allow for the loading and manipulation 
of NITF (National Imagery Transmission Format) images in OpenCV and C++ in
general.

\section*{Usage}

First, it is necessary to include the library.  This is done with a single
include statement. This proceedure is shown in Figure \ref{fig:basic01}. 


\begin{figure}[!h]
\begin{lstlisting}
#include <GeoImage>

int main( int argc, char* argv[] ){
   
   GEO::GeoImage img;
   return 0;
}

\end{lstlisting}
\caption{Process of importing the library and creating a basic image.}
\label{fig:basic01}
\end{figure}

When you compile your program, it is necessary to link the library. This
is shown in figure \ref{fig:basic02}.  Note that the build system will 
default to \texttt{/opt/local} for the path.  You may change this in the Makefile.


\begin{figure}[!h]
\begin{verbatim}
g++ hello_world.cpp -I/opt/local/include -L/opt/local/lib -lgeoimage
\end{verbatim}
\caption{Compilation example.}
\label{fig:basic02}
\end{figure}



\section*{API Tutorial}

\begin{figure}[!h]
\begin{lstlisting}
GEO::GeoImage( const string& image_filename = "_NO_IMAGE_SELECTED_", 
          const bool& initialize = false );
\end{lstlisting}
\caption{Constructor for the GeoImage Object}
\label{fig:geoimage01}
\end{figure}

This is the basic constructor for the GeoImage class.  This constructor requires two arguments, 
the name of the file which you are loading and a flag to tell the image if it is to load the
data.  Note that certain images may be large, thus it is advantageous to load them only when they 
are required.  True will load it immediately, and false will wait until the initialization flag
is set at a later time. To set the flag and load the image, you may call the \texttt{set\_init()}
flag. Also, every structure in the GeoImage library resides in the GEO namespace.

\begin{figure}[!h]
\begin{lstlisting}
GeoImage img( "U_1001A.NTF", false); //initialize image

img.set_init(true); //image is now loaded
\end{lstlisting}
\caption{Example of loading image into memory.}
\label{fig:geoimage02}
\end{figure}

You may also change the image filename PRIOR to loading the image. 

\subsection*{Writing Images}
In order to write images, you must possess certain information.  First you must 
give the api the desired filename, the OpenCV Images, and finally the header information
required to write the image.

\begin{figure}[!h]
\begin{verbatim}

GeoImage imgin( "U_1001A.NTF", true);
Mat cvimg = imgin.get_image();

/* Some Operations are applied here */

string output_filename = "result.ntf";
GeoHeader_Info* header_data = imgin.get_header();

GDAL_Data::write( output_filename, cvimg, header_data);

\end{verbatim}
\caption{General Process of Writing NITF Images}
\label{fig::gdal_data01}
\end{figure}

\end{document}
